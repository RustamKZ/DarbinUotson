#!/bin/bash
# postinst script for medicaldataanalyzer

set -e

case "$1" in
    configure)
        echo "Installing Python runtime..."

        # Путь установки приложения
        APP_DIR="/opt/medicaldataanalyzer/medicaldataanalyzer"

        # Python runtime должен быть упакован в resources
        PYTHON_RUNTIME="$APP_DIR/lib/app/python_runtime"

        if [ -d "$PYTHON_RUNTIME" ]; then
            # Копируем в корень приложения
            cp -r "$PYTHON_RUNTIME" "$APP_DIR/"

            # Делаем исполняемым
            chmod +x "$APP_DIR/python_runtime/linux/stats_engine"

            echo "Python runtime installed successfully"
        else
            echo "Warning: Python runtime not found in package"
        fi
        ;;
esac

exit 0
